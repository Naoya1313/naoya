\chapter{システム全体像}
\thispagestyle{myheadings}

\section{全体の流れ}

\subsection{提案手法}
本研究ではコンテン ツ視聴時の生体データを取得し，そのデータを基にコ ンテンツに重畳し迫力の増加や恐怖の軽減などを行う. それによりコンテンツにさらなる楽しみ方を加えるの を目的とする.

\subsection{生体データの分析と心拍上昇箇所の抽出処理}
安静時の心拍数からどれだけ心拍数が上昇したかを抽出 するため,  まず映画を見る前の1分間を安静時の心拍 数として平均を出し閾値にする. 次に図のように心拍 数を閾値と比較する.心拍数の上昇具合で表示するエ フェクトを変更するため,  1 から 3 までのレベル分けを した.平均心拍数よりも心拍数が 16bpm 以上高い時を レベル 3，14bmp 以上をレベル2，12bpm 以上をレベル 1 とする. from to の形式で心拍数が閾値を超えていた 時間を示す.時間は映画が始まってからの経過時間で エフェクトを表示するため相対時間にした.effectlevel で表示するエフェクトを決定するエフェクトの表示に適した形式にするため，心拍上 昇箇所の抽出処理した JSON データを一つの JSON デー タにまとめる.心拍データの概要図を図 3 に示す.こ れにより一つのコンテンツに一個の JSON データが作 られる.このデータを使いエフェクトを映画画面に重畳する.

\subsection{エフェクト表示}

\section{データの処理}

\subsection{生体データの観察}

\subsection{データの処理方法}

\section{エフェクト表示}



\subsection{electronでの表示方法}


エフェクト表示方法として,カテゴリやレベルごとにエフェクトを用意し,動画として重畳表示しているが,レベル分けを行ったためエフェクトをダイナミックに生成できず,細かな心拍数変化を表示できていない.


\subsection{エフェクトの種類}

エフェクトの種類としてAction, Anime, Horrorの3種類に分け見る映画のジャンルを選択可能にした．選択できるようにした理由として,視聴ジャンルによって同じエフェクト効果を表示した際に,エフェクトが映像視聴の際に邪魔になってしまう点が挙げられる．
エフェクトの目的として，Actionのエフェクトは迫力・緊迫感を与え，Animeのエフェクトは面白さを与える．Horrorのエフェクトは恐怖を軽減させる目的として制作した．心拍データの処理の際に1から3までのレベル分けの結果でエフェクトが変更される．1から3に分けた際に1の結果が出力された時間はエフェクトを透過し映像視聴の邪魔にならないように制作し，2と3の結果が出力されている時のみに2段階に分けエフェクトが表示されるように制作した．